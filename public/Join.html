<!DOCTYPE HTML>
<html lang="ko">

<head>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
		integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>OnTheFood 회원가입</title>

	<!-- 부트스트랩 CDN 로드 : 항상 최신 버전 사용 : maxcdn -->
	<!-- <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/latest/css/bootstrap.min.css"> -->
	<!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/latest/js/bootstrap.min.js"></script>  -->
	<!-- <script src="https://maxcdn.bootstrapcdn.com/bootstrap/latest/js/bootstrap.bundle.min.js"></script>     -->


	<!-- 부트스트랩 CDN 로드 : 항상 최신 버전 사용 : netdna -->
	<!-- <link rel="stylesheet" href="https://netdna.bootstrapcdn.com/bootstrap/latest/css/bootstrap.min.css"> -->
	<!-- <script src="https://netdna.bootstrapcdn.com/bootstrap/latest/js/bootstrap.min.js"></script> -->



	<!-- 내부 CSS 스타일 지정 -->
	<style>
		/* [html, body 영역 스타일 지정] */
		html,
		body {
			width: 100%;
			height: 100%;
			margin: 0;
			padding: 0;
			border: none;
			overflow: auto;
		}

		/* [body 스크롤바 메인 스타일 지정] */
		body::-webkit-scrollbar {
			width: 10px;
			background-color: #c1c1c1;
		}

		/* body 스크롤바 thumb 스타일 지정 */
		body::-webkit-scrollbar-thumb {
			background-color: #444444;
		}
	</style>



	<!-- 내부 JS 지정 -->
	<!-- <script>
		/* [html 최초 로드 및 이벤트 상시 대기 실시] */
		window.onload = function () {
			console.log("");
			console.log("[window onload] : [start]");
			console.log("");

			// 이벤트 함수 호출
			main();
		};

		function main() {
			console.log("");
			console.log("[main] : [start]");
			console.log("");
		};
	</script> -->

</head>

<body>
	<form style="width: 500px; margin: 20px auto;">
		<div class="form-group">
			<label for="emailInput">이메일 주소</label>
			<input type="email" class="form-control" id="emailInput" aria-describedby="emailHelp" placeholder="@Email">
			<small id="emailHelp" class="form-text text-muted"></small>
		</div>
		<br>
		<div class="form-group">
			<label for="pwInput1">비밀번호  (6자리 이상 입력하세요)</label>
			<input type="password" class="form-control" id="pwInput1" placeholder="Password">
		</div>
		<br>
		<div class="form-group">
			<label for="pwInput2">비밀번호 확인</label>
			<input type="password" class="form-control" id="pwInput2" placeholder="Password Confirm">
		</div>
		<br>
		<button type="button" class="btn btn-warning" id="register"
			style="width: 100%; font-weight: bold; font-size: 130%; ">회원 가입</button>
	</form>

	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
		integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p" crossorigin="anonymous" ;>
	</script>
	<script src="https://code.jquery.com/jquery-3.6.0.min.js"
		integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script>

	<script src="/__/firebase/8.6.5/firebase-app.js"></script>
	<script src="/__/firebase/8.6.5/firebase-auth.js"></script>
	<script src="/__/firebase/8.6.5/firebase-firestore.js"></script>
	<script src="/__/firebase/8.6.5/firebase-storage.js"></script>
	<script>
		// Your web app's Firebase configuration
		const firebaseConfig = {
			apiKey: "AIzaSyBrfN7fIlGUuBVTRx8qJyZrjUrdH7aOZ9I",
			authDomain: "otf-firebase-5120d.firebaseapp.com",
			projectId: "otf-firebase-5120d",
			storageBucket: "otf-firebase-5120d.appspot.com",
			messagingSenderId: "108770123410",
			appId: "1:108770123410:web:892719a7feb9042352904b"
		};

		// Initialize Firebase
		const app = firebase.initializeApp(firebaseConfig);

		const auth = firebase.auth();
		const fs = firebase.firestore();
		
	</script>
	<script>
		const db = firebase.firestore();
		const storage = firebase.storage();

		$('#register').click(function () {
			var email = $('#emailInput').val();
			var password = $('#pwInput1').val();
			//var password_confirm = $('#pwInput2').val();

			var email_2 = document.getElementById("emailInput");
			var password_2 = document.getElementById("pwInput1");
			var password_confirm_2 = document.getElementById("pwInput2");

			function email_check(email) {
				var reg = /^[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*@[0-9a-zA-Z]([-_\.]?[0-9a-zA-Z])*\.[a-zA-Z]{2,3}$/i;
				return reg.test(email);

			}		


			console.log(email_2.value)
			console.log(password_2.value)
			console.log(password_confirm_2.value)

			if(email_2.value == ""){
				alert("이메일 주소를 입력하세요.");
				emailInput.focus()
				return false;
			}
			else{
				if(!email_check(email_2.value)){
					alert("이메일 형식이 맞지않습니다.");
					return false;
				}
			}

			//if(password.value != )
			if(password_2.value == ""){
				alert("비밀번호를 입력하세요.");
				pwInput1.focus()
				return false;
			}

			if(password_2.value != password_confirm_2.value){
				alert("비밀번호가 같지 않습니다.");
				pwInput2.focus()
				return false;
			}



			if (password_2.value == password_confirm_2.value && email_2.value != ""){
			firebase.auth().createUserWithEmailAndPassword(email, password).then((result) => {
				console.log(result);
				console.log(result.user);
				window.location.href = 'Login.html';
			}).catch((result) => {
				alert("이메일 중복입니다. 다른 이메일을 입력하세요.");
			});
			
		}
		})

	</script>
</body>

</html>
